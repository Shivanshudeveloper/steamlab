(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3455)}])},3455:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(8520),i=t.n(r),o=t(5893),a=t(7294),c=t(7906),l=t(295),s=t(3252),u=t(2882),d=t(3184),h=t(3816),f=t(5113),p=t(3321),g=t(6798),x=t(657),m=t(1425),j=t(6580),v=t(7645),y=t(7948),b=t(6614),Z=t(5162),F=t(5934),S=t(9123),w=t(7918),_=t(8456),C=t(9669),k=t.n(C),D=t(2088),T="https://steamlab.herokuapp.com";function E(e,n,t,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void t(s)}c.done?n(l):Promise.resolve(l).then(r,i)}function O(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){O(e,n,t[n])}))}return e}function N(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var I=function(e){var n=e.product;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(h.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,o.jsx)(s.Z,{component:"th",scope:"row",children:n.name}),(0,o.jsx)(s.Z,{align:"center",children:n.cut}),(0,o.jsx)(s.Z,{align:"center",children:n.content}),(0,o.jsx)(s.Z,{align:"center",children:n.uploaded_to}),(0,o.jsx)(s.Z,{align:"center",children:(0,o.jsx)(w.Z,{sx:{backgroundColor:"blue",color:"#FFFFFF"},label:n.status})}),(0,o.jsx)(s.Z,{align:"center",children:n.reception}),(0,o.jsx)(s.Z,{align:"center",children:n.delivery_date}),(0,o.jsx)(s.Z,{align:"center",children:(0,o.jsx)(p.Z,{variant:"contained",href:n.publicURL,target:"_blank",children:"Download"})})]},n._id)})},L=function(){var e=(0,Z.uI)(),n=e.acceptedFiles,t=e.getRootProps,r=e.getInputProps,w=N(a.useState([]),2),C=w[0],O=w[1],L=N(a.useState(!1),2),W=L[0],z=L[1],R=N(a.useState({}),2),U=R[0],q=R[1],M=N(a.useState(!0),2),X=M[0],B=M[1];a.useEffect((function(){var e=sessionStorage.getItem("userEmail");console.log(e),D.I8.onAuthStateChanged((function(e){e&&q(e)})),k().get("".concat(T,"/api/v1/main/getuserfileuploadedtoserver/").concat(e)).then((function(e){O(e.data),B(!1)})).catch((function(e){return console.log(e)}))}),[]);var H=function(){var e=sessionStorage.getItem("userEmail");B(!0),k().get("".concat(T,"/api/v1/main/getuserfileuploadedtoserver/").concat(e)).then((function(e){O(e.data),B(!1)})).catch((function(e){return console.log(e)}))},G=N(a.useState((new Date).toLocaleDateString()),2),J=G[0],K=G[1],Q=function(){z(!1)},V=n.map((function(e){return(0,o.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)})),Y=N(a.useState(""),2),$=Y[0],ee=Y[1],ne=N(a.useState([]),2),te=ne[0],re=ne[1],ie=N(a.useState(!1),2),oe=ie[0],ae=ie[1],ce=N(a.useState(""),2),le=ce[0],se=ce[1],ue=N(a.useState(""),2),de=ue[0],he=ue[1],fe=function(){n.forEach((function(e){var n,t=(0,F.Z)(),r=D.tO.ref("uploadsfiles/".concat(t,"/").concat(e.name)).put(e);r.on("state_changed",(function(e){var n=Math.round(e.bytesTransferred/e.totalBytes*100);ae(!0),se("Uploaded ".concat(Math.floor(n),"%"))}),(function(e){se(e)}),(n=i().mark((function n(){var t,o,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,S.Z)(e.size),t="".concat(t.value," ").concat(t.unit),n.next=4,r.snapshot.ref.getDownloadURL();case 4:o=n.sent,a={useremail:U.email,userfullname:U.displayName,userphone:de,name:e.path,cut:t,content:e.type,uploaded_to:(new Date).toLocaleDateString(),status:"Received",reception:$,delivery_date:J,publicURL:o},k().post("".concat(T,"/api/v1/main/addfileuploadtoserver"),a).then((function(e){200===e.status&&(ae(!0),se("File Successfully Send"),H(),setInterval((function(){ae(!1)}),4e3))})).catch((function(e){return console.log(e)}));case 7:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){E(o,r,i,a,c,"next",e)}function c(e){E(o,r,i,a,c,"throw",e)}a(void 0)}))}))}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.Z,{open:oe,autoHideDuration:6e3,message:le,onClose:function(){ae(!1)}}),(0,o.jsxs)(x.Z,{open:W,fullWidth:!0,maxWidth:"md",onClose:Q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,o.jsx)(v.Z,{id:"alert-dialog-title",children:"STL File Upload"}),(0,o.jsx)(j.Z,{children:(0,o.jsxs)(y.Z,{children:[(0,o.jsxs)("section",{className:"dropzone",children:[(0,o.jsxs)("div",P({},t({className:"dsdsd"}),{children:[(0,o.jsx)("input",P({},r())),(0,o.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]})),(0,o.jsxs)("aside",{children:[(0,o.jsx)("h4",{children:"Files"}),(0,o.jsx)("ul",{children:V})]})]}),(0,o.jsx)("h4",{style:{marginTop:"1rem"},children:"When do you need it?"}),(0,o.jsx)(b.Z,{id:"outlined-multiline-static",fullWidth:!0,multiline:!0,rows:6,sx:{mt:2},value:$,onChange:function(e){ee(e.target.value)}}),(0,o.jsx)("h4",{style:{marginTop:"1rem"},children:"When do you need it?"}),(0,o.jsx)(b.Z,{required:!0,id:"outlined-required",type:"date",fullWidth:!0,sx:{mt:2},onChange:function(e){K(e.target.value)}}),(0,o.jsx)("h4",{style:{marginTop:"1rem"},children:"Phone Number"}),(0,o.jsx)(b.Z,{required:!0,id:"outlined-required",fullWidth:!0,sx:{mt:2},onChange:function(e){return he(e.target.value)}})]})}),(0,o.jsxs)(m.Z,{children:[(0,o.jsx)(p.Z,{size:"large",sx:{color:"#FFFFFF"},onClick:Q,children:"Close"}),(0,o.jsx)(p.Z,{size:"large",sx:{backgroundColor:"#141720",color:"#FFFFFF"},onClick:function(){fe();var e=A(te);for(n.forEach((function(n){var t,r,i,o,a=(0,S.Z)(n.size);a="".concat(a.value," ").concat(a.unit),e.push((t=n.path,r=a,i=n.type,o=(new Date).toLocaleDateString(),{name:t,cut:r,contentType:i,uploadedTo:o,status:"Received",desiredReception:$,date:J}))})),re(e);n.length>0;)n.pop();ee(""),Q()},autoFocus:!0,children:"Submit"})]})]}),(0,o.jsx)(p.Z,{sx:{float:"right",mb:8,mt:5},onClick:function(){z(!0)},variant:"contained",size:"large",children:"Submit a STL File"}),(0,o.jsx)("h1",{style:{marginTop:"45px"},children:"Shipment history"}),!0===X?(0,o.jsx)("center",{style:{marginTop:"10%"},children:(0,o.jsx)(_.Z,{sx:{color:"#FFFFFF"}})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.Z,{component:f.Z,children:(0,o.jsxs)(c.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,o.jsx)(d.Z,{children:(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(s.Z,{children:"Name"}),(0,o.jsx)(s.Z,{align:"center",children:"Cut"}),(0,o.jsx)(s.Z,{align:"center",children:"Content type"}),(0,o.jsx)(s.Z,{align:"center",children:"Uploaded to"}),(0,o.jsx)(s.Z,{align:"center",children:"Status"}),(0,o.jsx)(s.Z,{align:"center",children:"Desired reception"}),(0,o.jsx)(s.Z,{align:"center",children:"Delivery date"}),(0,o.jsx)(s.Z,{align:"center",children:"Download"})]})}),(0,o.jsx)(l.Z,{children:C.map((function(e){return(0,o.jsx)(I,{product:e},e._id)}))})]})})})]})}}},function(e){e.O(0,[614,84,774,888,179],(function(){return n=8581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);