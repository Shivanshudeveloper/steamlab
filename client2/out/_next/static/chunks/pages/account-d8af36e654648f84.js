(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{3290:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return t(7526)}])},7526:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var a=t(5893),i=t(9008),r=t(7357),l=t(7948),o=t(5861),s=t(6886);var c=t(7294),u=t(9586),d=t(6242),f=t(8445),m=t(7720),h=t(4267),x=t(2474),p=t(1057),v=t(7035),g=t(9669),j=t.n(g),b=t(8977);function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){y(e,n,t[n])}))}return e}function N(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],a=!0,i=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(t.push(l.value),!n||t.length!==n);a=!0);}catch(s){i=!0,r=s}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=function(e){var n=N(c.useState({}),2),t=(n[0],n[1]),i=N(c.useState(!1),2),l=i[0],o=i[1],g=(0,c.useState)({firstName:"",lastName:"",email:"",password:"",vat:"",billingaddress:""}),P=g[0],w=g[1];c.useEffect((function(){v.I8.onAuthStateChanged((function(e){if(e){t(e);var n=e.displayName.split(/(\s+)/);j().get("".concat(b.V,"/api/v1/main/getuserdetaislfileupload/").concat(e.email)).then((function(t){w({firstName:n[0],lastName:n[2],email:e.email,vat:t.data[0].vat,billingaddress:t.data[0].billingaddress})})).catch((function(e){return console.log(e)}))}}))}),[]);var C=function(e){w(Z({},P,y({},e.target.name,e.target.value)))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{open:l,autoHideDuration:4e3,onClose:function(e,n){"clickaway"!==n&&o(!1)},message:"Profile Successfully Updated"}),(0,a.jsx)("form",Z({autoComplete:"off",noValidate:!0},e,{children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(f.Z,{subheader:"Les informations peuvent \xeatre modifi\xe9es",title:"Profil"}),(0,a.jsx)(m.Z,{}),(0,a.jsx)(h.Z,{children:(0,a.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,a.jsx)(s.ZP,{item:!0,md:6,xs:12,children:(0,a.jsx)(x.Z,{fullWidth:!0,autoFocus:!0,helperText:"Please specify the first name",label:"Pr\xe9nom",name:"firstName",onChange:C,required:!0,value:P.firstName,variant:"outlined"})}),(0,a.jsx)(s.ZP,{item:!0,md:6,xs:12,children:(0,a.jsx)(x.Z,{fullWidth:!0,autoFocus:!0,label:"Nom",name:"lastName",onChange:C,required:!0,value:P.lastName,variant:"outlined"})}),(0,a.jsx)(s.ZP,{item:!0,md:6,xs:12,children:(0,a.jsx)(x.Z,{fullWidth:!0,autoFocus:!0,label:"Adresse mail",name:"email",disabled:!0,onChange:C,required:!0,value:P.email,variant:"outlined"})}),(0,a.jsx)(s.ZP,{item:!0,md:6,xs:12,children:(0,a.jsx)(x.Z,{fullWidth:!0,autoFocus:!0,label:"Adresse de facturation",name:"billingaddress",onChange:C,type:"text",value:P.billingaddress,variant:"outlined"})}),(0,a.jsx)(s.ZP,{item:!0,md:6,xs:12,children:(0,a.jsx)(x.Z,{fullWidth:!0,autoFocus:!0,label:"Num\xe9ro TVA",name:"vat",onChange:C,type:"text",value:P.vat,variant:"outlined"})})]})}),(0,a.jsx)(m.Z,{}),(0,a.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"flex-end",p:2},children:[(0,a.jsx)(p.Z,{color:"error",variant:"outlined",onClick:function(){v.I8.signOut().then((function(){router.push("/")})).catch((function(e){console.log(e)}))},sx:{mr:2},children:"Se d\xe9connecter"}),(0,a.jsx)(p.Z,{color:"primary",onClick:function(){v.I8.onAuthStateChanged((function(e){e&&e.updateProfile({displayName:"".concat(P.firstName," ").concat(P.lastName),email:P.email}).then((function(){j().get("".concat(b.V,"/api/v1/main/updateuserfileupload/").concat(e.email,"/").concat(P.vat,"/").concat(P.billingaddress)).then((function(e){o(!0)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}))},variant:"contained",children:"Enregistrer"})]})]})}))]})},w=t(3536),C=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{children:(0,a.jsx)("title",{children:"Account"})}),(0,a.jsx)(r.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,a.jsxs)(l.Z,{maxWidth:"lg",children:[(0,a.jsx)(o.Z,{sx:{mb:3},variant:"h4",children:"Compte client"}),(0,a.jsx)(s.ZP,{container:!0,spacing:3,children:(0,a.jsx)(s.ZP,{item:!0,lg:12,md:12,xs:12,children:(0,a.jsx)(P,{})})})]})})]})};C.getLayout=function(e){return(0,a.jsx)(w.c,{children:e})};var _=C}},function(e){e.O(0,[883,775,239,63,650,474,878,538,1,536,774,888,179],(function(){return n=3290,e(e.s=n);var n}));var n=e.O();_N_E=n}]);